(this["webpackJsonpcurrency-wallet"]=this["webpackJsonpcurrency-wallet"]||[]).push([[0],{26:function(e,t,a){},27:function(e,t,a){e.exports=a.p+"static/media/wallet.5ea122d6.png"},31:function(e,t,a){e.exports=a(45)},36:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),i=a.n(c),o=a(22),l=(a(36),a(11)),u=a(3),s=a(4),d=a(6),m=a(5),p=a(2),h=a(15),b=a(9),E=a(12),f=a.n(E),v=a(1),j=a(13),O=function(e){return{type:"ADD_EXPENSE",payload:e}},y=function(e){return{type:"LOGIN_SUCCESS",payload:e}},g=(a(41),a(27)),k=a.n(g),w=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",emailAutentication:!1,passwordAutentication:!1},n.handleData=n.handleData.bind(Object(b.a)(n)),n.checkStateEmail=n.checkStateEmail.bind(Object(b.a)(n)),n.checkStatePassword=n.checkStatePassword.bind(Object(b.a)(n)),n}return Object(s.a)(a,[{key:"handleData",value:function(e){var t=this,a=e.target,n=a.name,r=a.value;this.setState(Object(h.a)({},n,r),(function(){t.checkStateEmail(),t.checkStatePassword()}))}},{key:"checkStateEmail",value:function(){var e=this.state.email;e.includes("@")&&e.includes(".com")?this.setState({emailAutentication:!0}):this.setState({emailAutentication:!1})}},{key:"checkStatePassword",value:function(){this.state.password.length>=6?this.setState({passwordAutentication:!0}):this.setState({passwordAutentication:!1})}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.passwordAutentication,c=e.emailAutentication,i=this.props,o=i.logActionStore,l=i.history,u={email:t,password:a};return r.a.createElement("main",{className:"login-main"},r.a.createElement("img",{src:k.a,alt:"Wallet",className:"wallet-img"}),r.a.createElement("form",{action:"GET",className:"login-form"},r.a.createElement("label",{htmlFor:"email"},"Email:",r.a.createElement("input",{type:"text",name:"email",value:t,onChange:this.handleData,"data-testid":"email-input"})),r.a.createElement("label",{htmlFor:"password"},"Password:",r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleData,"data-testid":"password-input"})),r.a.createElement("button",{type:"button",disabled:!(n&&c),onClick:function(){o(u),l.push("/carteira")}},"Entrar")))}}]),a}(r.a.Component),x=Object(l.b)(null,(function(e){return{logActionStore:function(t){return e(y(t))}}}))(w),C=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.onChange,a=e.value;return r.a.createElement("label",{htmlFor:"tag"},"Tag",r.a.createElement("select",{name:"tag",id:"tag",value:a,onChange:t},r.a.createElement("option",{value:"Comida"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Sa\xfade"}," Sa\xfade "),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte")))}}]),a}(r.a.Component),S=(a(26),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={currencies:[],form:{value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Comida"}},n.handleData=n.handleData.bind(Object(b.a)(n)),n.actB=n.actB.bind(Object(b.a)(n)),n.actE=n.actE.bind(Object(b.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.fetchCurrencies()}},{key:"fetchCurrencies",value:function(){var e=Object(j.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,a=(a=Object.keys(a)).filter((function(e){return"USDT"!==e})),this.setState({currencies:a});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleData",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState((function(e){return{currencies:e.currencies,form:Object(v.a)(Object(v.a)({},e.form),{},Object(h.a)({},n,a))}}))}},{key:"actB",value:function(e){(0,this.props.act)(e),this.setState({form:{value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Comida"}})}},{key:"actE",value:function(e){var t=this.props.actE;t(e),this.setState({form:{value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Comida"}})}},{key:"render",value:function(){var e=this.state,t=e.currencies,a=e.form,n=this.props.editing,c=a.value,i=a.description,o=a.currency,l=a.method,u=a.tag,s=this.actB,d=this.actE,m=this.handleData,p="description";return console.log(n),t.length>1?r.a.createElement("form",{action:"GET",className:"add-currency-form"},r.a.createElement("label",{htmlFor:"value"},"Valor",r.a.createElement("input",{id:"value",name:"value",value:c,onChange:m})),r.a.createElement("label",{htmlFor:p},"Descri\xe7\xe3o:",r.a.createElement("textarea",{name:p,id:p,value:i,onChange:m})),r.a.createElement("label",{htmlFor:"currency"},"Moeda:",r.a.createElement("select",{name:"currency",id:"currency",value:o,onChange:m},t.map((function(e){return r.a.createElement("option",{value:e,key:e},e)})))),r.a.createElement("label",{htmlFor:"method"},"M\xe9todo de pagamento",r.a.createElement("select",{name:"method",id:"method",value:l,onChange:m},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito"))),r.a.createElement(C,{value:u,onChange:m}),!n&&r.a.createElement("button",{type:"button",onClick:function(){return s(a)}},"Adicionar despesa"),n&&r.a.createElement("button",{type:"button",onClick:function(){return d(a)}},"Editar despesa")):r.a.createElement("p",null,"Loading...")}}]),a}(r.a.Component)),D=Object(l.b)((function(e){return{editing:e.wallet.editing.isEditing}}))(S),F=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"getValue",value:function(e){var t=e.value,a=e.exchangeRates[e.currency].ask;return(parseFloat(a)*parseFloat(t)).toFixed(2)}},{key:"render",value:function(){var e=this.props,t=e.onClick,a=e.expense,n=e.edit;return r.a.createElement("tr",null,r.a.createElement("td",null,a.description),r.a.createElement("td",null,a.tag),r.a.createElement("td",null,a.method),r.a.createElement("td",null,a.value),r.a.createElement("td",null,a.exchangeRates[a.currency].name),r.a.createElement("td",null,parseFloat(a.exchangeRates[a.currency].ask).toFixed(2)),r.a.createElement("td",null,this.getValue(a)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button",onClick:t,"data-testid":"delete-btn"},"Remove"),r.a.createElement("button",{type:"button",onClick:function(){return n(a)},"data-testid":"edit-btn"},"Edit")))}}]),a}(r.a.Component),A=Object(l.b)(null,(function(e){return{edit:function(t){return e({type:"START_EDITING",payload:t})}}}))(F),N=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"getValue",value:function(e){var t=e.value,a=e.exchangeRates[e.currency].ask;return(parseFloat(a)*parseFloat(t)).toFixed(2)}},{key:"render",value:function(){var e=this.props,t=e.expenses,a=e.remove;return r.a.createElement("table",{className:"currency-tables"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir")),t.map((function(e,t){return r.a.createElement(A,{expense:e,onClick:function(){return a(t)},key:e.id})}))))}}]),a}(r.a.Component),R=Object(l.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{remove:function(t){return e({type:"REMOVE_EXPENSE",payload:t})}}}))(N),T=(a(42),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={headerCurrencyField:"BRL"},n.buttonAction=n.buttonAction.bind(Object(b.a)(n)),n.buttonActionEdit=n.buttonActionEdit.bind(Object(b.a)(n)),n}return Object(s.a)(a,[{key:"buttonAction",value:function(){var e=Object(j.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,this.props.addExpenseFunction)(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"buttonActionEdit",value:function(){var e=Object(j.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,this.props.editExpenseFunction)(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.userState,a=e.total,n=t.email,c=this.state.headerCurrencyField;console.log(a);var i=Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a);return console.log(i),r.a.createElement("main",null,r.a.createElement("header",{className:"wallet-header"},r.a.createElement("div",{"data-testid":"email-field",className:"email-field"},"Email:",n),r.a.createElement("div",null,r.a.createElement("p",{"data-testid":"total-field"},i||"R$ 0,00"),r.a.createElement("p",{"data-testid":"header-currency-field"},c))),r.a.createElement(D,{act:this.buttonAction,actE:this.buttonActionEdit}),r.a.createElement(R,null))}}]),a}(r.a.Component)),I=Object(l.b)((function(e){return{userState:e.user,expenses:e.wallet.expenses,total:e.wallet.total}}),(function(e){return{addExpenseFunction:function(t){var a;e((a=t,function(){var e=Object(j.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return n=e.sent,e.next=5,n.json();case 5:n=e.sent,r=Object(v.a)(Object(v.a)({},a),{},{exchangeRates:n}),t(O(r));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},editExpenseFunction:function(t){e({type:"END_EDITING",payload:t})}}}))(T),B=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:x}),r.a.createElement(p.a,{path:"/carteira",component:I}))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=a(16),M=a(29),P=a(30),G={email:"",password:"",logged:!1};var L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return Object(v.a)(Object(v.a)(Object(v.a)({},e),t.payload),{},{logged:!0});default:return e}},V=a(17),U={expenses:[],total:0,editing:{isEditing:!1,editingObject:{}}},W=function(e){var t,a=parseFloat(e.value);if("BRL"===e.currency)t=a;else{var n=e.currency;t=a*parseFloat(e.exchangeRates[n].ask)}return t=parseFloat(t.toFixed(2))};var X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_EXPENSE":return Object(v.a)(Object(v.a)({},e),{},{expenses:[].concat(Object(V.a)(e.expenses),[Object(v.a)(Object(v.a)({},t.payload),{},{id:e.expenses.length})]),total:e.expenses.reduce((function(e,t){return e+W(t)}),0)+W(t.payload)});case"REMOVE_EXPENSE":return Object(v.a)(Object(v.a)({},e),{},{expenses:[].concat(Object(V.a)(e.expenses.slice(0,t.payload)),Object(V.a)(e.expenses.slice(t.payload+1))),total:e.expenses.reduce((function(e,t){return e+W(t)}),0)-W(e.expenses[t.payload])});case"START_EDITING":return Object(v.a)(Object(v.a)({},e),{},{editing:{isEditing:!0,editingObject:t.payload}});case"END_EDITING":return Object(v.a)(Object(v.a)({},e),{},{expenses:[].concat(Object(V.a)(e.expenses.slice(0,e.editing.editingObject.id)),[Object(v.a)(Object(v.a)({},e.editing.editingObject),t.payload)],Object(V.a)(e.expenses.slice(e.editing.editingObject.id+1))),editing:{isEditing:!1,editingObject:{}},total:e.total+W(Object(v.a)(Object(v.a)({},e.editing.editingObject),t.payload))-W(e.editing.editingObject)});default:return e}},z=Object(_.combineReducers)({user:L,wallet:X}),J=Object(_.createStore)(z,Object(M.composeWithDevTools)(Object(_.applyMiddleware)(P.a)));i.a.render(r.a.createElement(l.a,{store:J},r.a.createElement(o.a,null,r.a.createElement(B,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.03f874c7.chunk.js.map